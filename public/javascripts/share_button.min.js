window.jQuery?function(e){e.fn.share_button=function(){var k=-1,o={link:window.location.href,title:document.title,description:"",image:"",code:"",prefix:"",postfix:"",small:!1,serviceSpecific:{}};arguments.length&&"object"==typeof arguments[0]&&e.extend(o,arguments[0]);var c={services:{twitter:{link:!0,title:"Twitter",share:function(a){a="http://twitter.com/share?text="+c.encode(c.cut(a.title,115))+"&url="+c.encode(a.link);c.popup(a,650,520)}},facebook:{link:!0,title:"Facebook",share:function(a){var b= "http://www.facebook.com/sharer.php?s=100",a=c.encode_args(b.length+44,a),b=b+"&p[url]="+a.link+(a.title?"&p[title]="+a.title:"")+(a.image?"&p[images][0]="+a.image:"")+(a.description?"&p[summary]="+a.description:"");c.popup(b,800,500)}},vkontakte:{link:!0,title:"\u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",share:function(a){var b="http://vkontakte.ru/share.php",a=c.encode_args(b.length+32,a),b=b+"?url="+a.link+(a.title?"&title="+a.title:"")+(a.image?"&image="+a.image:"")+(a.description? "&description="+a.description:"");c.popup(b,550,420)}},classmates:{link:!0,title:"\u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438",share:function(a){var b="http://www.odnoklassniki.ru/offer",a=c.encode_args(b.length+12,a),b=b+"?url="+a.link+(a.title?"&title="+a.title:"");c.popup(b,0,0)}},moimir:{link:!0,title:"\u041c\u043e\u0439 \u043c\u0438\u0440",alt:"Mo\u0439 \u043c\u0438\u0440@Mail.Ru",share:function(a){var b="http://connect.mail.ru/share",a=c.encode_args(b.length+35, a),b=b+"?url="+a.link+(a.title?"&title="+a.title:"")+(a.image?"&imageurl="+a.image:"")+(a.description?"&description="+a.description:"");c.popup(b,550,420)}},lj:{link:!0,title:"\u0416\u0438\u0432\u043e\u0439 \u0436\u0443\u0440\u043d\u0430\u043b",share:function(a){var b="http://www.livejournal.com/update.bml",a=c.encode_args(b.length+7+125,a,function(a){return c.encode(c.html(a))},{link:c.html}),a=c.encode('<a target="_blank" href="'+a.link+'">')+a.title+c.encode("</a>")+(a.image?c.encode('\n<img src="')+ a.image+c.encode('" alt="">'):"")+(a.description?c.encode("<br>")+a.description:"");c.popup(b+"?event="+a,0,0)}}},encode_args:function(a,b,e,d){var g=["link","title","image","description"],f=2048,l={},i="",e=e?e:c.encode,d=d?d:{};-1<k&&(f=7>=k?820:2E3);f-=a;for(a=0;a<g.length;a++){var j=g[a],p=d[j]?d[j]:e;switch(j){case "link":case "image":i=p(b[j]);break;default:var m=0;do i=p(c.cut(b[j],f-m)),m+=5;while(i.length>f&&15<=f-m)}i.length>f&&(i="");f-=i.length;l[j]=i}return l},share:function(a,b){var h= e.fn.share_button.env.buttons;if(h[a]&&b in c.services){var d={};e.extend(d,h[a].settings);d.serviceSpecific&&d.serviceSpecific[b]&&e.extend(d,d.serviceSpecific[b]);c.services[b].share(d)}return!1},popup:function(a,b,c){var d=e.fn.share_button.env;if(d.popup)d.popup.close(),d.popup=null;if(!b&&!c)d.popup=window.open(a,null);else{var g=Math.round,f=window.screen,l=g(f.width/2-g(b/2)),g=g(f.height/2-g(c/2));d.popup=window.open(a,"share_button_window","scrollbars=no,resizable=no,toolbar=no,directories=no,location=no,menubar=no,status=no,left="+ l+",top="+g+",width="+b+",height="+c,!0)}d.popup&&d.popup.focus()},encode:function(a){return encodeURIComponent(a)},ie_ver:function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a},cut:function(a,b){if(0>=b)return"";var c=b-5;if(a.length<=b)return a;if(0>=c)return a.substr(0,b);var d=a.substr(0,c);d.charAt(c-1).match(/\S/)&&d.match(/\s/)&&(d=d.replace(/\S+$/,"")+"(...)");return d},html:function(a){return a.replace(/&/g, "&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},init:function(){if(!e.fn.share_button.env.init){var a=window.location.href.match(/https?:\/\/[^\/]+(\.[a-z][0-9]{0,})\//),a="/static/images/share_button.png",a={"span.share_button_wrapper, span.share_button_wrapper *":{border:"none",margin:"0",padding:"0","text-decoration":"none","text-align":"left","text-transform":"none",font:"normal 12px Ubuntu, Verdana, Arial, sans-serif", "line-height":"17px",color:"black",background:"none",display:"block"},"span.share_button_wrapper":{position:"relative",display:"inline-block","vertical-align":"middle","white-space":"nowrap","z-index":"0"},"span.share_button_wrapper_showed":{"z-index":"2011"},"a.share_button_share":{width:"120px",height:"22px",background:'url("'+a+'") no-repeat 0 0 transparent',"vertical-align":"middle","float":"left"},"a.share_button_share span":{"margin-left":"32px","padding-top":"2px"},"a.share_button_share:hover":{"background-position":"-120px 0px"}, "a.share_button_share:active":{"background-position":"-240px 0px"},"a.share_button_share:focus":{outline:"none"},"a.share_button_share_showed, a.share_button_share_showed:hover, a.share_button_share_showed:active":{background:'url("'+a+'") no-repeat -240px 0 transparent'},"a.share_button_link":{width:"22px",height:"22px","float":"left",cursor:"pointer"},"a.share_button_link i":{background:'url("'+a+'") no-repeat 0 0 transparent',width:"16px",height:"16px",cursor:"pointer",position:"relative",top:"3px", left:"3px"},"a.share_button_link:hover i":{},"span.share_button_wrapper i.twitter":{"background-position":"-360px 0"},"span.share_button_wrapper i.facebook":{"background-position":"-408px 0"},"span.share_button_wrapper i.vkontakte":{"background-position":"-376px 0"},"span.share_button_wrapper i.lj":{"background-position":"-424px 0"},"span.share_button_wrapper i.classmates":{"background-position":"-392px 0"},"span.share_button_wrapper i.gbuzz":{"background-position":"-440px 0"},"span.share_button_wrapper i.moimir":{"background-position":"-456px 0"}, "div.share_button_menu":{"-moz-border-radius":"3px","border-radius":"3px",background:"#f1f1f1",width:"142px",display:"none",position:"absolute"},"div.share_button_menu_size":{visibility:"hidden",display:"block",position:"fixed",top:"0px",left:"0px"},"div.share_button_menu_showed":{position:"absolute",display:"block","z-index":"1001"},"a.share_button_menu_item":{width:"142px",height:"22px",position:"relative"},"a.share_button_menu_item i":{position:"absolute",background:'url("'+a+'") no-repeat 0 0 transparent', width:"16px",height:"16px",cursor:"pointer",top:"3px",left:"3px"},"a.share_button_menu_item span":{position:"relative","margin-left":"24px","padding-top":"3px"},"a.share_button_menu_item:hover":{"text-decoration":"underline"},"span.share_button_place":{"font-size":"1px"}},b="",c=0,d;for(d in a){b+=d+" {";c=0;for(var g in a[d])b+=(c++?";":"")+g+":"+a[d][g]+"!important";b+="}\n"}(e("head").length?e("head"):e("body")).prepend('<style type="text/css">'+b+"</style>");e.fn.share_button.env.init=!0}},fetch:function(a, b){for(var c in b)a=a.split("{"+c+"}").join(b[c]);return a},create_dom:function(a,b){var h=[],d=[],g;for(g in c.services){var f=c.services[g];h.push(c.fetch('<a href="#" class="share_button_menu_item" onclick="return share_button.env.share({index}, \'{name}\');" rel="nofollow" title="{alt}"><i class="{name}"></i><span>{title}</span></a>',{index:b,name:g,title:f.title,alt:f.alt?f.alt:f.title}));!a.small&&f.link&&d.push(c.fetch('<a href="#" class="share_button_link" onclick="return share_button.env.share({index}, \'{name}\');" rel="nofollow" title="{alt}"><i class="{name}"></i></a>', {index:b,name:g,alt:f.alt?f.alt:f.title}))}return e(c.fetch('{prefix}<span class="share_button_wrapper"><a href="#" rel="nofollow" class="share_button_share" id="share_button_{index}"><span>\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f</span></a>{links}<div class="share_button_menu" id="share_button_menu_{index}" style="">{items}</div></span>{postfix}',{index:b,items:h.join(""),links:d.join(""),prefix:a.prefix,postfix:a.postfix}))},create:function(a,b){for(var b=null!==b?b:e.fn.share_button.env.buttons.push(null)- 1,c=this.create_dom(a,b),d=null,g=0;g<c.length;g++){if(e(c[g]).hasClass("share_button_wrapper")){d=e(c[g]);break}if((d=e(c[g]).find("span.share_button_wrapper")).length)break}e(c.find(".share_button_wrapper"));var f={index:b,dom:c,wrapper:d,settings:a,showed:!1,timer:null,size:null,focused:!1,toggle:function(){return this.showed?this.hide():this.show()},hide:function(){if(this.showed)this.wrapper.find(".share_button_share").removeClass("share_button_share_showed").blur(),this.wrapper.find(".share_button_menu").removeClass("share_button_menu_showed"), this.wrapper.removeClass("share_button_wrapper_showed"),this.timer&&window.clearInterval(this.timer),this.showed=0},show:function(){for(var b=0,c=e.fn.share_button.env.buttons.length;b<c;b++)e.fn.share_button.env.buttons[b]&&e.fn.share_button.env.buttons[b].hide();b=this.wrapper.find(".share_button_share");c=this.wrapper.find(".share_button_menu");if(!this.size)c.addClass("share_button_menu_size"),this.size={width:c.width(),height:c.height()},c.removeClass("share_button_menu_size");var d=this.wrapper.offset(), f=e(document).scrollTop(),g=e(document).scrollLeft(),h=e(window).width(),k=e(window).height(),g=d.left+this.size.width<=h+g,d=d.top-f<=k/2?b.height():-this.size.height,f=g?0:b.width()-this.size.width;if("direction"in a){switch(a.direction.x){case "left":f=b.width()-this.size.width;break;case "right":f=0}switch(a.direction.y){case "up":d=-this.size.height;break;case "down":d=b.height()}}this.wrapper.addClass("share_button_wrapper_showed");b.addClass("share_button_share_showed");c.addClass("share_button_menu_showed"); c.css({top:d+"px",left:f+"px"});this.focused=this.showed=!0;var n=this,d=function(){n.focused=!0},f=function(){n.focused=!1};b.mouseover(d).mouseout(f);c.mouseover(d).mouseout(f);this.timer&&window.clearInterval(this.timer);this.timer=window.setInterval(function(){!n.focused&&n.hide()},500)}};f.wrapper.find(".share_button_share").click(function(a){f.toggle();a.preventDefault()});return e.fn.share_button.env.buttons[b]=f}},k=c.ie_ver();if(!e.fn.share_button.env)e.fn.share_button.env={init:!1,buttons:[], share:c.share,popup:null};if(window==this){var q=e.fn.share_button.env.buttons.push(null)-1;document.write('<span class="share_button_place" id="share_button_place'+q+'"></span>');e(function(){c.init();var a=c.create(o,q);e("#share_button_place"+a.index).replaceWith(a.dom)})}else c.init(),this.each(function(){var a=c.create(o,null);e(this).prepend(a.dom)})};window.share_button=e.fn.share_button}(jQuery):window.share_button=function(){};
;